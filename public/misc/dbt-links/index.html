<!DOCTYPE html>
<html lang="en-us"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>

  
  <script>
    !function(){var i="analytics",analytics=window[i]=window[i]||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"];analytics.factory=function(e){return function(){if(window[i].initialized)return window[i][e].apply(window[i],arguments);var n=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(e)>-1){var c=document.querySelector("link[rel='canonical']");n.push({__t:"bpc",c:c&&c.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})}n.unshift(e);analytics.push(n);return analytics}};for(var n=0;n<analytics.methods.length;n++){var key=analytics.methods[n];analytics[key]=analytics.factory(key)}analytics.load=function(key,n){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.setAttribute("data-global-segment-analytics-key",i);t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r);analytics._loadOptions=n};analytics._writeKey="pynCOJpnnC6lmdYBIC5Xb7KUWRl16bOp";;analytics.SNIPPET_VERSION="5.2.0";
    analytics.load("pynCOJpnnC6lmdYBIC5Xb7KUWRl16bOp");
    analytics.page();
    }}();
  </script>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   <meta name="description" content="üõ†Ô∏èüì¶ dbt Links
dbt Additional Resources

dbt Mesh FAQs
Awesome dbt, a curated list of dbt resources
SODA, tool to find, analyze, and solve data issues
Integrating dbt w/ Datadog

learn dbt

learn.dbt

[fundamentals]https://learn.getdbt.com/courses/dbt-fundamentals
[dbt &amp; snowflake]https://courses.getdbt.com/courses/dbt-cloud-and-snowflake-for-developers
[refactoring SQL]https://courses.getdbt.com/courses/refactoring-sql-for-modularity
[advanced deployment w/ dbt Cloud]https://courses.getdbt.com/courses/advanced-deployment



dbt code completion

post on setup
helper links

ohmyzsh
dbt-completion.bash
useful onboarding script



cheat sheet
git workflow for dbt
Go to dbt project
cd ~/projects/{dbt project name}
Start the pipenv shell
pipenv shell
Update master
git fetch
git pull
Checkout branch
New branch:
git checkout -b {new_branch name}
From PR:
git pull origin pull/{PR Number}/head
Update models locally
dbt run --models staging_{name of model}
Add &#43; to run all referenced by and/or depends on models
&#43;model_c for all upstream models, also runs model_a and model_b">  

  <title>
    
      
    
  </title>


  <link rel="shortcut icon" type="image/x-icon" href="https://javiersalazar.info:1313/" />
  
  
  
  <link rel="stylesheet" href="https://javiersalazar.info:1313/css/main.01273a70fa873b012d056499c16bb47955e0e7526c34edb73f05ca8f99f488ebc323423c6557f93f9b42a41de0448a25ce9a1ab577d0bf61e36eaf52a4979a1d.css" integrity="sha512-ASc6cPqHOwEtBWSZwWu0eVXg51JsNO23PwXKj5n0iOvDI0I8ZVf5P5tCpB3gRIolzpoatXfQv2Hjbq9SpJeaHQ==" />
  

  <link rel="stylesheet" href="https://javiersalazar.info:1313/css/custom.css">
</head>
<body a="auto">
        <main class="page-content" aria-label="Content">
            <div class="w">
<a href="https://javiersalazar.info:1313/">..</a>


<article>
    <p class="post-meta">
        <time datetime="0001-01-01 00:00:00 &#43;0000 UTC">
            0001-01-01
        </time>
    </p>

    <h1></h1>

    

    <h1 id="-dbt-links">üõ†Ô∏èüì¶ dbt Links</h1>
<h2 id="dbt-additional-resources">dbt Additional Resources</h2>
<ul>
<li><a href="https://docs.getdbt.com/best-practices/how-we-mesh/mesh-5-faqs">dbt Mesh FAQs</a></li>
<li><a href="https://github.com/Hiflylabs/awesome-dbt#integrations">Awesome dbt, a curated list of dbt resources</a></li>
<li><a href="https://docs.soda.io/soda/integrate-dbt.html">SODA, tool to find, analyze, and solve data issues</a></li>
<li><a href="https://docs.getdbt.com/guides/serverless-datadog?step=1">Integrating dbt w/ Datadog</a></li>
</ul>
<h2 id="learn-dbt">learn dbt</h2>
<ul>
<li><a href="https://learn.getdbt.com/catalog">learn.dbt</a>
<ul>
<li>[fundamentals]https://learn.getdbt.com/courses/dbt-fundamentals</li>
<li>[dbt &amp; snowflake]https://courses.getdbt.com/courses/dbt-cloud-and-snowflake-for-developers</li>
<li>[refactoring SQL]https://courses.getdbt.com/courses/refactoring-sql-for-modularity</li>
<li>[advanced deployment w/ dbt Cloud]https://courses.getdbt.com/courses/advanced-deployment</li>
</ul>
</li>
</ul>
<h2 id="dbt-code-completion">dbt code completion</h2>
<ul>
<li><a href="https://discourse.getdbt.com/t/how-we-set-up-our-computers-for-working-on-dbt-projects/243">post on setup</a>
<h3 id="helper-links">helper links</h3>
<ul>
<li><a href="https://github.com/ohmyzsh/ohmyzsh">ohmyzsh</a></li>
<li><a href="https://github.com/dbt-labs/dbt-completion.bash">dbt-completion.bash</a></li>
<li><a href="https://gitlab.com/gitlab-data/analytics/blob/master/admin/onboarding_script.zsh">useful onboarding script</a></li>
</ul>
</li>
</ul>
<h1 id="cheat-sheet">cheat sheet</h1>
<h2 id="git-workflow-for-dbt">git workflow for dbt</h2>
<h4 id="go-to-dbt-project">Go to dbt project</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd ~/projects/<span style="color:#f92672">{</span>dbt project name<span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="start-the-pipenv-shell">Start the pipenv shell</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>pipenv shell
</span></span></code></pre></div><h4 id="update-master">Update master</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git fetch
</span></span><span style="display:flex;"><span>git pull
</span></span></code></pre></div><h4 id="checkout-branch">Checkout branch</h4>
<h4 id="new-branch">New branch:</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git checkout -b <span style="color:#f92672">{</span>new_branch name<span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="from-pr">From PR:</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git pull origin pull/<span style="color:#f92672">{</span>PR Number<span style="color:#f92672">}</span>/head
</span></span></code></pre></div><h3 id="update-models-locally">Update models locally</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dbt run --models staging_<span style="color:#f92672">{</span>name of model<span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="add--to-run-all-referenced-by-andor-depends-on-models">Add <code>+</code> to run all referenced by and/or depends on models</h4>
<p><code>+model_c</code> for all upstream models, also runs <code>model_a</code> and <code>model_b</code></p>
<p><code>model_a+</code> for all downstream models, also runs <code>model_b</code> and <code>model_c</code></p>
<p><code>+model_b+</code> for all up &amp; down stream models, also runs <code>model_a</code> and <code>model_c</code></p>
<h4 id="make-sure-sql-syntax-is-correct">Make sure SQL syntax is correct</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sqlfluff fix -f -n <span style="color:#f92672">{</span>full path of file<span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="updatecreate-model">Update/Create model</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dbt run ‚Äîmodels <span style="color:#f92672">{</span>model name<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>dbt test ‚Äîmodels <span style="color:#f92672">{</span>model name<span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="update-schemayml--view-local-doc-changes">Update schema.yml &amp; View local doc changes</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dbt docs generate <span style="color:#f92672">&amp;&amp;</span> dbt docs serve --port <span style="color:#ae81ff">8001</span>
</span></span></code></pre></div><h4 id="run-git-commands">Run GIT commands</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git add <span style="color:#f92672">{</span>files<span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>git commit -m <span style="color:#e6db74">&#34;message here&#34;</span>
</span></span><span style="display:flex;"><span>git push --set-upstream origin <span style="color:#f92672">{</span>branch here<span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="either-wait-for-pr-review-or-force-merge--in-emergency">Either wait for PR review or force merge ü´£ in emergency</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>!merge
</span></span></code></pre></div><h4 id="switch-back-to-master-update-and-delete-branch">Switch back to master, update and delete branch</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git checkout master
</span></span><span style="display:flex;"><span>git fetch
</span></span><span style="display:flex;"><span>git merge
</span></span><span style="display:flex;"><span>git branch -d <span style="color:#f92672">{</span>local_branch<span style="color:#f92672">}</span>
</span></span></code></pre></div><h2 id="more-notes">More notes</h2>
<h3 id="update-incremental-models">Update Incremental models</h3>
<h4 id="update-models-as-needed-and-run-the-following-locally">update models as needed and run the following locally</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dbt run -s <span style="color:#f92672">{</span>model name<span style="color:#f92672">}</span> --full-refresh
</span></span></code></pre></div><h4 id="if-updating-more-than-one-file-and-you-want-to-run-dbt-for-all-of-them">if updating more than one file and you want to run dbt for all of them</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dbt run -s <span style="color:#f92672">{</span>model name<span style="color:#f92672">}</span> <span style="color:#f92672">{</span>another model name<span style="color:#f92672">}</span> path_to/models/* --full-refresh
</span></span></code></pre></div><h4 id="once-tested-and-merged-into-production-make-sure-buildkite-successfully-pushed-changes-you-will-need-to-trigger-a-full-refresh-in-dagster">Once tested and merged into production (make sure buildkite successfully pushed changes), you will need to trigger a full refresh in dagster</h4>
<ol>
<li>go to dagster</li>
<li>open <code>ad-hoc</code> either by searching or navigating to it.</li>
<li>Go into <code>Launchpad</code> tab</li>
<li>Under <code>Preset</code> select ‚ÄúRun‚Äù and under <code>Mode</code> select ‚ÄúProd‚Äù. Dagter will give a template to run ad-hoc models.</li>
<li>Replace <code>model_name</code> with necessary models to update, <code>-</code> for each model.</li>
<li>At the same level is <code>models:</code> &amp; <code>task_tags:</code> add <code>full-refresh: True</code></li>
<li>When ready, hit <code>Launch Run</code> in the bottom right corner</li>
</ol>
<h3 id="update-seed-files">Update Seed files</h3>
<h4 id="update-all-seed-files">Update all seed files</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dbt seed
</span></span></code></pre></div><h4 id="update-individual-seed">Update individual seed</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dbt seed --select <span style="color:#f92672">{</span>seed name<span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="update-individual-seed-and-rebuild-table-structure">Update individual seed and rebuild table structure</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>dbt seed --select <span style="color:#f92672">{</span>seed name<span style="color:#f92672">}</span> --full-refresh
</span></span></code></pre></div><h3 id="building-a-snapshot-via-template">Building a snapshot via template</h3>
<p>replace <code>{ }</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- template for building a snapshot model
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#39;{% snapshot {source domain name}_&#39;</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">lower</span>(<span style="color:#66d9ef">TABLE_NAME</span>) <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;_snapshot %}&#39;</span> <span style="color:#f92672">||</span> chr(<span style="color:#ae81ff">10</span>) <span style="color:#f92672">||</span> chr(<span style="color:#ae81ff">10</span>) <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#39;{{&#39;</span> <span style="color:#f92672">||</span> chr(<span style="color:#ae81ff">10</span>) <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>		 <span style="color:#e6db74">&#39;  config(&#39;</span> <span style="color:#f92672">||</span> chr(<span style="color:#ae81ff">10</span>) <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>		  <span style="color:#e6db74">&#39;    unique_key=&#39;&#39;&#39;</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;id&#39;</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;&#39;&#39;,&#39;</span> <span style="color:#f92672">||</span> chr(<span style="color:#ae81ff">10</span>) <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>		    <span style="color:#e6db74">&#39;    strategy=&#39;&#39;timestamp&#39;&#39;,&#39;</span> <span style="color:#f92672">||</span> chr(<span style="color:#ae81ff">10</span>) <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>		    <span style="color:#e6db74">&#39;    updated_at=&#39;&#39;&#39;</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">lower</span>(<span style="color:#66d9ef">column_name</span>) <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;::timestamp_ntz&#39;&#39;,&#39;</span> <span style="color:#f92672">||</span> chr(<span style="color:#ae81ff">10</span>) <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>		    <span style="color:#e6db74">&#39;  )&#39;</span> <span style="color:#f92672">||</span> chr(<span style="color:#ae81ff">10</span>) <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#39;}}&#39;</span> <span style="color:#f92672">||</span> chr(<span style="color:#ae81ff">10</span>) <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>		chr(<span style="color:#ae81ff">10</span>) <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#39;select *&#39;</span> <span style="color:#f92672">||</span> chr(<span style="color:#ae81ff">10</span>) <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#39;from {{ source(&#39;&#39;catalog_api&#39;&#39;, &#39;&#39;&#39;</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">lower</span>(<span style="color:#66d9ef">TABLE_NAME</span>) <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;&#39;&#39;) }}&#39;</span> <span style="color:#f92672">||</span> chr(<span style="color:#ae81ff">10</span>) <span style="color:#f92672">||</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#39;where &#39;</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;_sdc_batched_at&#39;</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39; &gt;= {{ safe_max_timestamp(this, &#39;&#39;&#39;</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;_sdc_batched_at&#39;</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;&#39;&#39;) }}&#39;</span> <span style="color:#f92672">||</span> chr(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> information_schema.columns
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> table_schema <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;{source domain schema}&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> table_catalog <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;{source domain catalog}&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> (<span style="color:#66d9ef">column_name</span> <span style="color:#66d9ef">ilike</span> <span style="color:#e6db74">&#39;%modif%&#39;</span> <span style="color:#66d9ef">or</span> <span style="color:#66d9ef">column_name</span> <span style="color:#66d9ef">ilike</span> <span style="color:#e6db74">&#39;%update%&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> data_type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;TIMESTAMP_TZ&#39;</span>
</span></span></code></pre></div><h3 id="building-a-staging-model-from-snapshots">Building a staging model from snapshots</h3>
<p>replace <code>{ }</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- template for building base staging models from snapshots
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;{{&#39;</span> <span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;  config(&#39;</span> <span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;    materialized=&#39;&#39;table&#39;&#39;,&#39;</span> <span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;    unique_key=&#39;&#39;id&#39;&#39;,&#39;</span> <span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;  )&#39;</span> <span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;}}&#39;</span> <span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;with stitch_fixed as (&#39;</span> <span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;  {{ stitch_utils.coalesce_fields(source(&#39;&#39;{snapshot domain}_snapshots&#39;&#39;, &#39;&#39;&#39;</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">lower</span>(<span style="color:#66d9ef">table_name</span>)  <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;&#39;&#39;)) }}&#39;</span> <span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;  where dbt_valid_to is null&#39;</span> <span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;)&#39;</span> <span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;select&#39;</span> <span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">||</span> <span style="color:#e6db74">&#39; *&#39;</span> <span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;from stitch_fixed&#39;</span> <span style="color:#f92672">||</span> char(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;staging_&#39;</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">replace</span>(<span style="color:#66d9ef">lower</span>(<span style="color:#66d9ef">table_name</span>), <span style="color:#e6db74">&#39;_snapshot&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;.sql&#39;</span> <span style="color:#66d9ef">as</span> file_name,
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;select * from {analyst&#39;&#39;s schema}.{source domain}.staging_&#39;</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">replace</span>(<span style="color:#66d9ef">lower</span>(<span style="color:#66d9ef">table_name</span>), <span style="color:#e6db74">&#39;_snapshot&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;  - name: &#39;</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">lower</span>(<span style="color:#66d9ef">table_name</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">*</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> information_schema.tables
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> table_schema <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;{source domain}&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">and</span> table_catalog <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;{domain snapshot catalog}&#39;</span>
</span></span></code></pre></div>
</article>

            </div>
        </main>
    </body>
</html>
